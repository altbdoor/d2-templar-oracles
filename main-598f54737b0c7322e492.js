!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=1)}([,function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t){return"function"==typeof t}var s=!1,c={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function u(t){setTimeout((function(){throw t}),0)}var a={closed:!0,next:function(t){},error:function(t){if(c.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete:function(){}},h=function(){return Array.isArray||function(t){return t&&"number"==typeof t.length}}();function l(t){return null!==t&&"object"==typeof t}var f=function(){function t(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t}(),p=function(){function t(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var e;if(!this.closed){var n=this._parentOrParents,r=this._ctorUnsubscribe,i=this._unsubscribe,s=this._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(var c=0;c<n.length;++c){n[c].remove(this)}if(o(i)){r&&(this._unsubscribe=void 0);try{i.call(this)}catch(t){e=t instanceof f?d(t.errors):[t]}}if(h(s)){c=-1;for(var u=s.length;++c<u;){var a=s[c];if(l(a))try{a.unsubscribe()}catch(t){e=e||[],t instanceof f?e=e.concat(d(t.errors)):e.push(t)}}}if(e)throw new f(e)}},t.prototype.add=function(e){var n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function d(t){return t.reduce((function(t,e){return t.concat(e instanceof f?e.errors:e)}),[])}var b=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),y=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=a;break;case 1:if(!n){o.destination=a;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new v(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new v(o,n,r,i)}return o}return i(e,t),e.prototype[b]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this},e}(p),v=function(t){function e(e,n,r,i){var s,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return o(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==a&&(o((u=Object.create(n)).unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=s,c._error=r,c._complete=i,c}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=c.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;u(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};c.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.useDeprecatedSynchronousErrorHandling)throw t;u(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!c.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return c.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(u(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(y);var m=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function _(t){return t}function w(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x(t)}function x(t){return 0===t.length?_:1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}}var E=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof y)return t;if(t[b])return t[b]()}return t||e||n?new y(t,e,n):new y(a)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||c.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),c.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){c.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),!function(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof y?r:null}return!0}(t)?console.warn(e):t.error(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=g(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[m]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:x(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=g(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function g(t){if(t||(t=c.Promise||Promise),!t)throw new Error("no Promise impl found");return t}var S=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}};function O(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var T=O(),N=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function P(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var L=function(t){if(t&&"function"==typeof t[m])return r=t,function(t){var e=r[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(N(t))return S(t);if(P(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,u),t};if(t&&"function"==typeof t[T])return e=t,function(t){for(var n=e[T]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,r,i=l(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function k(t,e){return new E((function(n){var r=new p,i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function M(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new E((function(n){var r=new p;return r.add(e.schedule((function(){var i=t[m]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(P(t))return function(t,e){return new E((function(n){var r=new p;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(N(t))return k(t,e);if(function(t){return t&&"function"==typeof t[T]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new E((function(n){var r,i=new p;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[T](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function A(t,e){return e?M(t,e):t instanceof E?t:new E(L(t))}function I(t){return t&&"function"==typeof t.schedule}function j(t,e){return e?k(t,e):new E(S(t))}function C(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return I(n)?(t.pop(),k(t,n)):j(t)}function H(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new V(t,e))}}var V=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new D(t,this.project,this.thisArg))},t}(),D=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(y),Y=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,n}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(y),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(y);function R(t,e){if(!e.closed){if(t instanceof E)return t.subscribe(e);var n;try{n=L(t)(e)}catch(t){e.error(t)}return n}}function U(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(U((function(n,r){return A(t(n,r)).pipe(H((function(t,i){return e(n,t,r,i)})))}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new q(t,n))})}var q=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new z(t,this.project,this.concurrent))},t}(),z=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new Y(this),n=this.destination;n.add(e);var r=R(t,e);r!==e&&n.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(F);function $(){return void 0===(t=1)&&(t=Number.POSITIVE_INFINITY),U(_,t);var t}var B=new E((function(t){return t.complete()}));function G(t){return t?function(t){return new E((function(e){return t.schedule((function(){return e.complete()}))}))}(t):B}var W=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(p)),J=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),K=new(function(t){function e(n,r){void 0===r&&(r=J.now);var i=t.call(this,n,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(J))(W);function Q(t){return!h(t)&&t-parseFloat(t)+1>=0}function X(t,e,n){void 0===t&&(t=0);var r=-1;return Q(e)?r=Number(e)<1?1:Number(e):I(e)&&(n=e),I(n)||(n=K),new E((function(e){var i=Q(t)?t:+t-n.now();return n.schedule(Z,i,{index:0,period:r,subscriber:e})}))}function Z(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function tt(t,e){return new E(e?function(n){return e.schedule(et,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function et(t){var e=t.error;t.subscriber.error(e)}function nt(t,e,n,r){return o(n)&&(r=n,n=void 0),r?nt(t,e,n).pipe(H((function(t){return h(t)?r.apply(void 0,t):r(t)}))):new E((function(r){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var c=e;e.addEventListener(n,r,o),s=function(){return c.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(n,r),s=function(){return u.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var a=e;e.addListener(n,r),s=function(){return a.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var h=0,l=e.length;h<l;h++)t(e[h],n,r,i,o)}i.add(s)}(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function rt(){}var it=new E(rt);var ot=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(y),st=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(y);function ct(t,e,n,r,i){if(void 0===i&&(i=new st(t,n,r)),!i.closed)return e instanceof E?e.subscribe(i):L(e)(i)}var ut=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new at(t))},t}(),at=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=ct(this,t[n],void 0,n);this.subscriptions&&this.subscriptions.push(r),this.add(r)}this.observables=null}},e.prototype.notifyNext=function(t,e,n){if(!this.hasFirst){this.hasFirst=!0;for(var r=0;r<this.subscriptions.length;r++)if(r!==n){var i=this.subscriptions[r];i.unsubscribe(),this.remove(i)}this.subscriptions=null}this.destination.next(e)},e}(ot);function ht(t,e){return U(t,e,1)}function lt(t){return function(e){return e.lift(new ft(t))}}var ft=function(){function t(t){this.value=t}return t.prototype.call=function(t,e){return e.subscribe(new pt(t,this.value))},t}(),pt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.value=n,r}return i(e,t),e.prototype._next=function(t){this.destination.next(this.value)},e}(y);function dt(t,e){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new bt(t,e,n))}}var bt=function(){function t(t,e,n){void 0===n&&(n=!1),this.accumulator=t,this.seed=e,this.hasSeed=n}return t.prototype.call=function(t,e){return e.subscribe(new yt(t,this.accumulator,this.seed,this.hasSeed))},t}(),yt=function(t){function e(e,n,r,i){var o=t.call(this,e)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return i(e,t),Object.defineProperty(e.prototype,"seed",{get:function(){return this._seed},set:function(t){this.hasSeed=!0,this._seed=t},enumerable:!0,configurable:!0}),e.prototype._next=function(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.accumulator(this.seed,t,n)}catch(t){this.destination.error(t)}this.seed=e,this.destination.next(e)},e}(y),vt=function(){function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t}();function mt(t){return function(e){return 0===t?G():e.lift(new _t(t))}}var _t=function(){function t(t){if(this.total=t,this.total<0)throw new vt}return t.prototype.call=function(t,e){return e.subscribe(new wt(t,this.total))},t}(),wt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.ring=new Array,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t},e.prototype._complete=function(){var t=this.destination,e=this.count;if(e>0)for(var n=this.count>=this.total?this.total:this.count,r=this.ring,i=0;i<n;i++){var o=e++%n;t.next(r[o])}t.complete()},e}(y);function xt(t){return void 0===t&&(t=null),function(e){return e.lift(new Et(t))}}var Et=function(){function t(t){this.defaultValue=t}return t.prototype.call=function(t,e){return e.subscribe(new gt(t,this.defaultValue))},t}(),gt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.defaultValue=n,r.isEmpty=!0,r}return i(e,t),e.prototype._next=function(t){this.isEmpty=!1,this.destination.next(t)},e.prototype._complete=function(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()},e}(y);function St(t,e,n){return 0===n?[e]:(t.push(e),t)}function Ot(){return function(t,e){return arguments.length>=2?function(n){return w(dt(t,e),mt(1),xt(e))(n)}:function(e){return w(dt((function(e,n,r){return t(e,n,r+1)})),mt(1))(e)}}(St,[])}function Tt(t,e,n){return function(r){return r.lift(new Pt(t,e,n))}}var Nt,Pt=function(){function t(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}return t.prototype.call=function(t,e){return e.subscribe(new Lt(t,this.nextOrObserver,this.error,this.complete))},t}(),Lt=function(t){function e(e,n,r,i){var s=t.call(this,e)||this;return s._tapNext=rt,s._tapError=rt,s._tapComplete=rt,s._tapError=r||rt,s._tapComplete=i||rt,o(n)?(s._context=s,s._tapNext=n):n&&(s._context=n,s._tapNext=n.next||rt,s._tapError=n.error||rt,s._tapComplete=n.complete||rt),s}return i(e,t),e.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},e.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},e.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},e}(y);Nt||(Nt={});var kt=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return C(this.value);case"E":return tt(this.error);case"C":return G()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();function Mt(t,e){void 0===e&&(e=K);var n,r=(n=t)instanceof Date&&!isNaN(+n)?+t-e.now():Math.abs(t);return function(t){return t.lift(new At(r,e))}}var At=function(){function t(t,e){this.delay=t,this.scheduler=e}return t.prototype.call=function(t,e){return e.subscribe(new It(t,this.delay,this.scheduler))},t}(),It=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.delay=n,i.scheduler=r,i.queue=[],i.active=!1,i.errored=!1,i}return i(e,t),e.dispatch=function(t){for(var e=t.source,n=e.queue,r=t.scheduler,i=t.destination;n.length>0&&n[0].time-r.now()<=0;)n.shift().notification.observe(i);if(n.length>0){var o=Math.max(0,n[0].time-r.now());this.schedule(t,o)}else this.unsubscribe(),e.active=!1},e.prototype._schedule=function(t){this.active=!0,this.destination.add(t.schedule(e.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))},e.prototype.scheduleNotification=function(t){if(!0!==this.errored){var e=this.scheduler,n=new jt(e.now()+this.delay,t);this.queue.push(n),!1===this.active&&this._schedule(e)}},e.prototype._next=function(t){this.scheduleNotification(kt.createNext(t))},e.prototype._error=function(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.scheduleNotification(kt.createComplete()),this.unsubscribe()},e}(y),jt=function(){return function(t,e){this.time=t,this.notification=e}}();var Ct=function(){function t(t,e){this.count=t,this.source=e}return t.prototype.call=function(t,e){return e.subscribe(new Ht(t,this.count,this.source))},t}(),Ht=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.count=n,i.source=r,i}return i(e,t),e.prototype.complete=function(){if(!this.isStopped){var e=this.source,n=this.count;if(0===n)return t.prototype.complete.call(this);n>-1&&(this.count=n-1),e.subscribe(this._unsubscribeAndRecycle())}},e}(y),Vt=function(){function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t}();function Dt(t,e){return function(n){return n.lift(new Yt(t,e))}}var Yt=function(){function t(t,e){this.predicate=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Ft(t,this.predicate,this.thisArg))},t}(),Ft=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}e&&this.destination.next(t)},e}(y);function Rt(t){return void 0===t&&(t=zt),function(e){return e.lift(new Ut(t))}}var Ut=function(){function t(t){this.errorFactory=t}return t.prototype.call=function(t,e){return e.subscribe(new qt(t,this.errorFactory))},t}(),qt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.errorFactory=n,r.hasValue=!1,r}return i(e,t),e.prototype._next=function(t){this.hasValue=!0,this.destination.next(t)},e.prototype._complete=function(){if(this.hasValue)return this.destination.complete();var t=void 0;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)},e}(y);function zt(){return new Vt}function $t(t,e){var n=arguments.length>=2;return function(r){return r.pipe(t?Dt((function(e,n){return t(e,n,r)})):_,mt(1),n?xt(e):Rt((function(){return new Vt})))}}function Bt(t,e){return"function"==typeof e?function(n){return n.pipe(Bt((function(n,r){return A(t(n,r)).pipe(H((function(t,i){return e(n,t,r,i)})))})))}:function(e){return e.lift(new Gt(t))}}var Gt=function(){function t(t){this.project=t}return t.prototype.call=function(t,e){return e.subscribe(new Wt(t,this.project))},t}(),Wt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.project=n,r.index=0,r}return i(e,t),e.prototype._next=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this._innerSub(e)},e.prototype._innerSub=function(t){var e=this.innerSubscription;e&&e.unsubscribe();var n=new Y(this),r=this.destination;r.add(n),this.innerSubscription=R(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},e.prototype._complete=function(){var e=this.innerSubscription;e&&!e.closed||t.prototype._complete.call(this),this.unsubscribe()},e.prototype._unsubscribe=function(){this.innerSubscription=void 0},e.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&t.prototype._complete.call(this)},e.prototype.notifyNext=function(t){this.destination.next(t)},e}(F);var Jt=function(){function t(t){if(this.total=t,this.total<0)throw new vt}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t,this.total))},t}(),Kt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.total=n,r.count=0,r}return i(e,t),e.prototype._next=function(t){var e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))},e}(y),Qt=n.p+"assets/ambient/darkness.mp3?cfcb960905b14ea271bf8b552691eb50",Xt=n.p+"assets/oracles/break.mp3?00872a7f6f066569b22b5994123a2066";const Zt={m:n.p+"assets/oracles/oracle1.mp3?13503fca6a5920c715a3de1041a4c877",l1:n.p+"assets/oracles/oracle2.mp3?050a97a7bee7eee80496c58b7fd5d372",r1:n.p+"assets/oracles/oracle3.mp3?45249862732e5a50f82fb5534bb5001c",l2:n.p+"assets/oracles/oracle4.mp3?e970acc6e2574648ee5f4041be6fe5f8",r2:n.p+"assets/oracles/oracle5.mp3?ed9ea6d40175b85db377089e31e26ceb",l3:n.p+"assets/oracles/oracle6.mp3?4c6f4b0a92da41628d496512367fd5d2",r3:n.p+"assets/oracles/oracle7.mp3?b076de61c70fb2beca6b10b19f07b132",break:Xt,darkness:Qt,ready:n.p+"assets/oracles/ready.mp3?f3ef998e035d4c3b4da0912b3ba1add3"},te=t=>document.querySelector(t),ee=t=>[...document.querySelectorAll(t)],ne=t=>new Promise(e=>{const n=document.createElement("audio");n.volume=.8,n.preload="auto",n.src=Zt[t],document.body.appendChild(n),n.currentTime=0,n.onended=()=>{document.body.removeChild(n),e()},n.play()}),re=(t,e)=>{const n=te(".map__details"),r=document.createElement("div");r.innerHTML=t?`<span class="text-d2-fireteam">${t}</span> ${e}`:e,n.appendChild(r)},ie=(t,e)=>{const n=te(".player-chat"),r=document.createElement("div");r.innerHTML=`<span class="text-d2-fireteam">${t}:</span> ${e}`,n.appendChild(r)},oe=t=>{te(".map__results__message").innerHTML="PLAYER_SHOT_EARLY"===t?"\n            <h3>That was too early!</h3>\n            <p>Be patient, keep track of the orders, and try again!</p>\n        ":"PLAYER_SHOT_LATE"===t?"\n            <h3>That was too late!</h3>\n            <p>Be more aware, keep track of the orders, and try again!</p>\n        ":"\n            <h3>You did it!</h3>\n            <p>You manage to overcome the Templar Oracle simulation!</p>\n        ",te(".map__results").classList.remove("d-none")},se=[{name:"HogginHedges#0995",hasMic:!1},{name:"Obelisk#0459",hasMic:!0},{name:"DeathWatcher#0351",hasMic:!1},{name:"Fiend99#0109",hasMic:!0},{name:"Ech0local#0181",hasMic:!1},{name:"PittWarrior#0711",hasMic:!0},{name:"Frenzzzied#0163",hasMic:!1},{name:"Tristesse#0598",hasMic:!0},{name:"Dudzerful#0404",hasMic:!1},{name:"Southpause#0867",hasMic:!0},{name:"Molotov_87#0343",hasMic:!1},{name:"HauntedHelen#0615",hasMic:!0},{name:"Splendido76#0180",hasMic:!1},{name:"Ghostly_00#0054",hasMic:!0},{name:"TruLuv89#0105",hasMic:!1},{name:"LadyLake#0677",hasMic:!0},{name:"VxVtriumph#0337",hasMic:!1},{name:"EliminaT0R#0621",hasMic:!0},{name:"Octagun#0138",hasMic:!1},{name:"Gamer-Name23#0116",hasMic:!0}],ce=["m","l1","r1","l2","r2","l3","r3"];function ue(t){const e=t.slice(0);for(let t=e.length-1;t>0;t--){const n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}const ae={mockPlayers:(()=>{const t=ue(se).slice(0,5);return[t[0],...t]})(),mockPlayerOracles:[],name:"JohnDoe#1234",selectedOracle:""};(t=>{const e=te("#player-list"),n=document.createDocumentFragment();t.forEach(t=>{const e=document.createElement("li");e.classList.add("list-group-item"),e.innerText=""+t.name,n.appendChild(e)}),e.prepend(n)})(ae.mockPlayers.slice(1)),te(".map__btn__start").onclick=()=>{const t=te(".player-list__name");var e;ae.name=t.value,t.disabled=!0,ae.selectedOracle=te('.map__radio > [name="oracles"]:checked').value,ae.mockPlayerOracles=(e=ae.selectedOracle,ue(ce.filter(t=>t!==e))),te(".map__btn__start").classList.add("d-none"),ee(".map__radio").forEach(t=>{t.classList.add("d-none")}),ee(".map__oracle").forEach(t=>{t.classList.remove("d-none"),t.classList.add("map__oracle--vanish")});A(ne("darkness")).pipe(H(()=>Array(5).fill(0).map((t,e)=>e+3).map(t=>ue(ce).slice(0,t))),$(),ht(t=>{return re("","The Oracles prepare to sing their refrain"),function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return $()(C.apply(void 0,t))}(A(t).pipe(ht((t,e)=>{if(t!==ae.selectedOracle){const n=ae.mockPlayers[ae.mockPlayerOracles.indexOf(t)];ie(n.name,"i got "+(e+1))}return te(".map__oracle--"+t).classList.remove("map__oracle--vanish"),A(ne(t)).pipe(lt(t))}),Ot(),Tt(()=>{ee(".map__oracle").forEach(t=>t.classList.add("map__oracle--vanish"))}),Mt(1400),(e=2,void 0===e&&(e=-1),function(t){return 0===e?G():e<0?t.lift(new Ct(-1,t)):t.lift(new Ct(e-1,t))}),$t(),Tt(()=>{te(".map__btn__shoot").classList.remove("d-none"),t.map(t=>te(".map__oracle--"+t)).forEach(t=>t.classList.remove("map__oracle--vanish")),ne("ready"),re("","The Templar summons the Oracles")})),A(t).pipe(ht((e,n)=>{const r=e===ae.selectedOracle,i=t.includes(ae.selectedOracle),o=t.indexOf(ae.selectedOracle)<t.indexOf(e);var s;return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!h(t[0]))return t[0];t=t[0]}return j(t,void 0).lift(new ut)}((s=()=>{return r?X(6e3).pipe(Bt(()=>tt("PLAYER_SHOT_LATE"))):X((t=1e3,i=4e3,t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1)+t))).pipe(Tt(()=>{ne("break");const t=ae.mockPlayers[ae.mockPlayerOracles.indexOf(e)];re(t.name,"has destroyed an Oracle"),ie(t.name,n+1+" down"),te(".map__oracle--"+e).classList.add("map__oracle--vanish")}),lt("MOCK_SHOT_SUCCESS"));var t,i},new E((function(t){var e;try{e=s()}catch(e){return void t.error(e)}return(e?A(e):G()).subscribe(t)}))),nt(te(".map__btn__shoot"),"click").pipe(function(t){return function(e){return 0===t?G():e.lift(new Jt(t))}}(1),Bt(()=>r?(ne("break"),re(ae.name,"has destroyed an Oracle"),te(".map__oracle--"+e).classList.add("map__oracle--vanish"),C("PLAYER_SHOT_SUCCESS")):i&&!o?(ne("break"),re(ae.name,"has destroyed an Oracle"),te(".map__oracle--"+e).classList.add("map__oracle--vanish"),tt("PLAYER_SHOT_EARLY")):it)))}),Ot())).pipe(Ot(),Mt(1400),Tt(()=>{te(".map__btn__shoot").classList.add("d-none"),re("","The Oracles recognize their refrain")}),Bt(t=>X(7===t[0].length?0:6e3).pipe(lt(t))));var e}),$t()).subscribe(()=>{oe("SUCCESS")},t=>{oe(t),te(".map__btn__shoot").classList.add("d-none")})},te(".map__results__retry").onclick=()=>{te(".player-list__name").disabled=!1,te(".map__btn__start").classList.remove("d-none"),ee(".map__radio").forEach(t=>{t.classList.remove("d-none")}),ee(".map__oracle").forEach(t=>{t.classList.add("d-none")}),te(".map__results").classList.add("d-none"),te(".map__details").innerHTML="",te(".player-chat").innerHTML=""}}]);